# ç”¨ä¾‹æ‰§è¡Œçš„å…ˆåé¡ºåº
å…ˆçœ‹æ™®é€šå‡½æ•°è¿è¡Œé¡ºåº
```python
import pytest

def test_one():
    print("æˆ‘æ˜¯æ¸…å®‰")

def test_02():
    print("--02--")

def test_a():
    print("--a--")

def test_a_1():
    print("--a_01__")

def test_01():
    print("--01--")
```
![image.png](https://cdn.nlark.com/yuque/0/2022/png/25452484/1670819981745-1b4968fe-14ea-4ba2-a5ef-a4e7e8cd7f1f.png#averageHue=%23fcfcfb&clientId=u087a934a-06d7-4&from=paste&height=306&id=u690f647e&name=image.png&originHeight=382&originWidth=1054&originalType=binary&ratio=1&rotation=0&showTitle=false&size=38492&status=done&style=none&taskId=u8e407336-0d95-4213-8dfa-dc64eec4fb9&title=&width=843.2)
å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ ·å†™ï¼Œç”¨ä¾‹çš„è¿è¡Œå…ˆåé¡ºåºæ ¹æ®è‡ªå·±å†™çš„å…ˆåå‡½æ•°é¡ºåºè¿›è¡Œæ‰§è¡Œçš„ã€‚
é‚£ä¹ˆå†™åˆ°ç±»ä¸­å‘¢ï¼Ÿ
```python
import pytest

class Testcase:
    def test_one(self):
        print("æˆ‘æ˜¯æ¸…å®‰")

    def test2(self):
        print("--02--")

    def test_a(self):
        print("--a--")

    def test_a_1(self):
        print("--a_01__")

    def test1(self):
        print("--01--")
```
![image.png](https://cdn.nlark.com/yuque/0/2022/png/25452484/1670835657318-82f3b52d-62c8-47d3-b0da-f5144473e7ac.png#averageHue=%23fcfcfb&clientId=uc3421dec-32cd-4&from=paste&height=288&id=u22816685&name=image.png&originHeight=360&originWidth=795&originalType=binary&ratio=1&rotation=0&showTitle=false&size=30247&status=done&style=none&taskId=uc276e3e0-ee9a-4b5f-95a1-8aa43e46676&title=&width=636)
æ²¡æœ‰ä¸æ¯«å˜åŒ–ã€‚
## æ¨¡å—ç”¨ä¾‹è¿è¡Œå…ˆåé¡ºåº
é¦–å…ˆå‡†å¤‡ä¸¤ä¸ª.pyæ–‡ä»¶ï¼Œåç§°ä¸ºtest_a,test_bã€‚å†…å®¹å¦‚ä¸‹ï¼š
```python
import pytest

class Test_a:
    def test_a1(self):
        print(f"æˆ‘æ˜¯-{__class__.__name__}-ç±»")
```
```python
import pytest

class Test_b:
    def test_b1(self):
        print(f"æˆ‘æ˜¯-{__class__.__name__}-ç±»")
```
![image.png](https://cdn.nlark.com/yuque/0/2022/png/25452484/1670911028617-f8206c58-23df-436b-8fd1-12c29f2e2046.png#averageHue=%23fcfcfb&clientId=u37dfe069-ab0a-4&from=paste&height=310&id=u39165324&name=image.png&originHeight=387&originWidth=1023&originalType=binary&ratio=1&rotation=0&showTitle=false&size=38049&status=done&style=none&taskId=ua8b42d5d-f819-475e-acc8-9c045fb0a0a&title=&width=818.4)
çœ‹ï¼Œæ˜¯æœ‰å…ˆåé¡ºåºçš„ã€‚å…¶å®ä½ ä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯Pycharmå·²ç»äº‹å…ˆæ’è¿‡ä¸€æ¬¡é¡ºåºäº†ï¼ŒæŒ‰a-zäº¦æˆ–è€…1-9è¿™æ ·çš„é¡ºåºå·²ç»æ’è¿‡äº†ï¼Œå› ä¸ºï¼Œä½ åœ¨åˆ›å»º.pyæ–‡ä»¶çš„æ—¶å€™ï¼Œå°±å·²ç»äº§ç”Ÿäº†é¡ºåºï¼Œpyteståªæ˜¯æŒ‰ç…§ç‰¹å®šé¡ºåºè¿›è¡Œæµ‹è¯•è€Œå·²ã€‚
# å‰ç½®åç½®
```python
import pytest

class Testcase():
    def setup(self):
        """æ¯ä¸ªæ–¹æ³•ç”¨ä¾‹è¿è¡Œå‰è¿è¡Œ"""
        print("---1-set---")

    def teardown(self):
        """æ¯ä¸ªæ–¹æ³•ç”¨ä¾‹è¿è¡Œåè¿è¡Œ"""
        print("---1-down---")

    def setup_class(self):
        """æ¯ä¸ª class è¿è¡Œå‰è¿è¡Œ(åªè¿è¡Œä¸€æ¬¡)"""
        print("---2-set class---")

    def teardown_class(self):
        """æ¯ä¸ª class è¿è¡Œåè¿è¡Œ(åªè¿è¡Œä¸€æ¬¡)"""
        print("---2-down class---")

    def test_02(self):
        print("--02--")

    def test_01(self):
        print("--01--")
```
![image.png](https://cdn.nlark.com/yuque/0/2022/png/25452484/1670836819553-0e8492a9-81c2-40ca-8445-7053a4d32b25.png#averageHue=%23fdfbf7&clientId=uc3421dec-32cd-4&from=paste&height=179&id=uf2ca84d1&name=image.png&originHeight=224&originWidth=1008&originalType=binary&ratio=1&rotation=0&showTitle=false&size=30623&status=done&style=none&taskId=u60a74355-588b-4af7-9852-c186c15260b&title=&width=806.4)
å®ƒä¼šå‘Šè¯‰ä½ teardowmåœ¨åç»­å‡†å¤‡å–æ¶ˆäº†ï¼Œå»ºè®®æ”¹ç”¨teardowm_methodï¼Œæ”¹å®Œåå†è·‘ï¼Œå°±ä¸ä¼šå‡ºç°è¿™ç§è­¦å‘Šäº†ã€‚(**setupæ”¹setup_methodä»¥åŠteardowmæ”¹teardowm_methodæ­¤å¤„éœ€è‡ªå·±æ”¹åŠ¨**)
![image.png](https://cdn.nlark.com/yuque/0/2022/png/25452484/1670837579111-ab68b492-aa4e-4a96-8364-3df67cf3faee.png#averageHue=%23fdfdfc&clientId=u8b4027b0-e39a-4&from=paste&height=267&id=ub17e67cf&name=image.png&originHeight=334&originWidth=859&originalType=binary&ratio=1&rotation=0&showTitle=false&size=21446&status=done&style=none&taskId=u8786f66e-f928-4f35-8749-923a605fb1f&title=&width=687.2)
 å‰ç½®åç½®æ˜¯ä¸è®¡å…¥ç”¨ä¾‹çš„ï¼Œå®ƒåªä¼šé»˜é»˜çš„å¥”è·‘  ã€‚å¹¶ä¸”å®ƒä¸ä¼šåƒunittestä¸€æ ·æ ¹æ®ç”¨ä¾‹çš„åç§°æ¥è‡ªåŠ¨åˆ¤æ–­æ‰§è¡Œç”¨ä¾‹çš„å…ˆåé¡ºåºã€‚å®ƒæœ‰è‡ªå·±çš„æ–¹å¼æ–¹æ³•ã€‚
> ğŸ’¥æ³¨æ„çœ‹ä¼˜å…ˆçº§ï¼Œä»¥åŠä»£ç ä¸­çš„æ³¨é‡Šï¼Œsetup_classå…ˆè¿è¡Œï¼Œå¹¶ä¸”ç›´åˆ°ä»£ç å…¨éƒ¨è·‘å®Œï¼Œteardown_classæ‰è¿è¡Œï¼Œå…¶ä¸­setup_methodä»¥åŠteardowm_methodæ¯ä¸ªç”¨ä¾‹è¿è¡Œçš„æ—¶å€™å‰åéƒ½ä¼šè¿è¡Œä¸€æ¬¡ã€‚

# ç”¨ä¾‹å…ˆåé¡ºåºè®¾å®špytest-ordering
è¿™å°±éœ€è¦ç”¨åˆ°ç¬¬ä¸‰æ–¹æ’ä»¶äº†
```python
pip install pytest-ordering
```
```python
import pytest

class Testcase():
    def setup_method(self):
        """æ¯ä¸ªæ–¹æ³•ç”¨ä¾‹è¿è¡Œå‰è¿è¡Œ"""
        print("---1-set---")

    def teardown_method(self):
        """æ¯ä¸ªæ–¹æ³•ç”¨ä¾‹è¿è¡Œåè¿è¡Œ"""
        print("---1-down---")

    def setup_class(self):
        """æ¯ä¸ª class è¿è¡Œå‰è¿è¡Œ(åªè¿è¡Œä¸€æ¬¡)"""
        print("---2-set class---")

    def teardown_class(self):
        """æ¯ä¸ª class è¿è¡Œåè¿è¡Œ(åªè¿è¡Œä¸€æ¬¡)"""
        print("---2-down class---")

    def setup_module(self):
        """æ¨¡å—è¿è¡Œå‰è¿è¡Œ(åªè¿è¡Œä¸€æ¬¡)"""
        print("---3-module class---")

    def teardown_module(self):
        """æ¨¡å—è¿è¡Œåè¿è¡Œ(åªè¿è¡Œä¸€æ¬¡)"""
        print("---3-module class---")
        
    @pytest.mark.run(order=2)
    def test_02(self):
        print("--02--")

    @pytest.mark.run(order=1)
    def test_01(self):
        print("--01--")
```
![image.png](https://cdn.nlark.com/yuque/0/2022/png/25452484/1670896738248-4c8da4f8-3e33-4203-934d-c45a74a88869.png#averageHue=%23fdfdfc&clientId=u7a73c10d-3251-4&from=paste&height=262&id=u023b7275&name=image.png&originHeight=328&originWidth=697&originalType=binary&ratio=1&rotation=0&showTitle=false&size=20296&status=done&style=none&taskId=ub51d1e26-7b7b-47cf-9b39-0863d8c7b6a&title=&width=557.6)
å¦‚ä¸Šç®€å•çš„å°æµ‹è¯•ï¼Œä»¥ä¾¿äºäº†è§£ã€‚æ¥ä¸‹æ¥è¯¦ç»†è¯´è¯´ï¼
## æºç å°ç‰‡æ®µ
```python
orders_map = {
    'first': 0,
    'second': 1,
    'third': 2,
    'fourth': 3,
    'fifth': 4,
    'sixth': 5,
    'seventh': 6,
    'eighth': 7,
    'last': -1,
    'second_to_last': -2,
    'third_to_last': -3,
    'fourth_to_last': -4,
    'fifth_to_last': -5,
    'sixth_to_last': -6,
    'seventh_to_last': -7,
    'eighth_to_last': -8,
}
```
> ä¸Šè¿°æ˜¯æºç ä¸­å¯¹äºä¼˜å…ˆçº§

## ä¸€ä¸ªå°ç¤ºèŒƒ
```python
import pytest

class Testnew:

    @pytest.mark.second
    def testa_02(self):
        print("--02--")

    @pytest.mark.third
    def testa_03(self):
        print("--03--")

    @pytest.mark.fourth
    def testa_04(self):
        print("--04--")

    @pytest.mark.first
    def testa_01(self):
        print("--01--")
```
![image.png](https://cdn.nlark.com/yuque/0/2022/png/25452484/1670898734736-1f729ac9-3ad0-43ab-9f8e-03d335a19512.png#averageHue=%23fcfcfb&clientId=u951f253f-7d88-4&from=paste&height=349&id=ue9319260&name=image.png&originHeight=436&originWidth=1031&originalType=binary&ratio=1&rotation=0&showTitle=false&size=44614&status=done&style=none&taskId=u7628d83f-b2bd-4af2-9493-fe1343779a2&title=&width=824.8)
> é‰´äºä¸Šè¿°ï¼Œè¿è¡Œçš„æ—¶å€™ä¼šæç¤ºä¸€ç³»åˆ—çš„ä¿¡æ¯(æ­¤å¤„ä¸å±•ç¤º)ï¼Œçœ‹ç€ä¸çˆ½ï¼Œå¯ä»¥ï¼š

```python
import pytest


class Testnew:

    @pytest.mark.run(order=2)
    def testa_02(self):
        print("--02--")

    @pytest.mark.run(order=3)
    def testa_03(self):
        print("--03--")

    @pytest.mark.run(order=4)
    def testa_04(self):
        print("--04--")

    @pytest.mark.run(order=1)
    def testa_01(self):
        print("--01--")
```
![image.png](https://cdn.nlark.com/yuque/0/2022/png/25452484/1670899644701-d77ffb58-d0fd-46b9-b8da-a72c563e53b8.png#averageHue=%23fdfcfc&clientId=u951f253f-7d88-4&from=paste&height=202&id=u12b4869e&name=image.png&originHeight=253&originWidth=925&originalType=binary&ratio=1&rotation=0&showTitle=false&size=19823&status=done&style=none&taskId=ua8f421bf-5526-41e2-9327-04d58be880a&title=&width=740)
å½“ç„¶ä¸Šè¿°ä»£ç ä¸­ä½ ä¹Ÿå¯ä»¥å†™å…¥è´Ÿæ•°ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚
# æ‰§è¡Œç‰¹å®šçš„ç”¨ä¾‹
ä¹Ÿå°±æ˜¯å‰é¢è®²è¿‡çš„-kå‚æ•°ã€‚ä¸€èµ·çœ‹çœ‹
```python
import pytest

class Test_new:
    def test_b2(self):
        print("**b2**")

    def test_b1(self):
        print("**b1**")

    def test_a1(self):
        print("--a1--")

    def test_a2(self):
        print("--a2--")
```
![image.png](https://cdn.nlark.com/yuque/0/2022/png/25452484/1670914113132-58106cf6-42e1-4ff2-8299-f131676ba29a.png#averageHue=%23fcfbfa&clientId=u34e1a41f-5922-4&from=paste&height=307&id=u0007b23c&name=image.png&originHeight=384&originWidth=1018&originalType=binary&ratio=1&rotation=0&showTitle=false&size=41765&status=done&style=none&taskId=u5e2af11e-8579-45a1-8893-357b796ca2e&title=&width=814.4)
å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿‡æ»¤æ‰ä¸€äº›ä¸æƒ³è¿è¡Œçš„ç”¨ä¾‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆä¸é”™ä¸”æ¯”è¾ƒå¸¸ç”¨çš„å‚æ•°ã€‚
