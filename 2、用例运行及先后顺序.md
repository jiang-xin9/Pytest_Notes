# ç”¨ä¾‹æ‰§è¡Œçš„å…ˆåé¡ºåº
å…ˆçœ‹æ™®é€šå‡½æ•°è¿è¡Œé¡ºåº
```python
import pytest

def test_one():
    print("æˆ‘æ˜¯æ¸…å®‰")

def test_02():
    print("--02--")

def test_a():
    print("--a--")

def test_a_1():
    print("--a_01__")

def test_01():
    print("--01--")
```
![è¾“å…¥å›¾ç‰‡è¯´æ˜](images/image2_1.png)

å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ ·å†™ï¼Œç”¨ä¾‹çš„è¿è¡Œå…ˆåé¡ºåºæ ¹æ®è‡ªå·±å†™çš„å…ˆåå‡½æ•°é¡ºåºè¿›è¡Œæ‰§è¡Œçš„ã€‚
é‚£ä¹ˆå†™åˆ°ç±»ä¸­å‘¢ï¼Ÿ
```python
import pytest

class Testcase:
    def test_one(self):
        print("æˆ‘æ˜¯æ¸…å®‰")

    def test2(self):
        print("--02--")

    def test_a(self):
        print("--a--")

    def test_a_1(self):
        print("--a_01__")

    def test1(self):
        print("--01--")
```
![è¾“å…¥å›¾ç‰‡è¯´æ˜](images/image2_2.png)

æ²¡æœ‰ä¸æ¯«å˜åŒ–ã€‚
## æ¨¡å—ç”¨ä¾‹è¿è¡Œå…ˆåé¡ºåº
é¦–å…ˆå‡†å¤‡ä¸¤ä¸ª.pyæ–‡ä»¶ï¼Œåç§°ä¸ºtest_a,test_bã€‚å†…å®¹å¦‚ä¸‹ï¼š
```python
import pytest

class Test_a:
    def test_a1(self):
        print(f"æˆ‘æ˜¯-{__class__.__name__}-ç±»")
```
```python
import pytest

class Test_b:
    def test_b1(self):
        print(f"æˆ‘æ˜¯-{__class__.__name__}-ç±»")
```
![è¾“å…¥å›¾ç‰‡è¯´æ˜](images/image2_3.png)

çœ‹ï¼Œæ˜¯æœ‰å…ˆåé¡ºåºçš„ã€‚å…¶å®ä½ ä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯Pycharmå·²ç»äº‹å…ˆæ’è¿‡ä¸€æ¬¡é¡ºåºäº†ï¼ŒæŒ‰a-zäº¦æˆ–è€…1-9è¿™æ ·çš„é¡ºåºå·²ç»æ’è¿‡äº†ï¼Œå› ä¸ºï¼Œä½ åœ¨åˆ›å»º.pyæ–‡ä»¶çš„æ—¶å€™ï¼Œå°±å·²ç»äº§ç”Ÿäº†é¡ºåºï¼Œpyteståªæ˜¯æŒ‰ç…§ç‰¹å®šé¡ºåºè¿›è¡Œæµ‹è¯•è€Œå·²ã€‚
# å‰ç½®åç½®
```python
import pytest

class Testcase():
    def setup(self):
        """æ¯ä¸ªæ–¹æ³•ç”¨ä¾‹è¿è¡Œå‰è¿è¡Œ"""
        print("---1-set---")

    def teardown(self):
        """æ¯ä¸ªæ–¹æ³•ç”¨ä¾‹è¿è¡Œåè¿è¡Œ"""
        print("---1-down---")

    def setup_class(self):
        """æ¯ä¸ª class è¿è¡Œå‰è¿è¡Œ(åªè¿è¡Œä¸€æ¬¡)"""
        print("---2-set class---")

    def teardown_class(self):
        """æ¯ä¸ª class è¿è¡Œåè¿è¡Œ(åªè¿è¡Œä¸€æ¬¡)"""
        print("---2-down class---")

    def test_02(self):
        print("--02--")

    def test_01(self):
        print("--01--")
```
![è¾“å…¥å›¾ç‰‡è¯´æ˜](images/image2_4.png)

å®ƒä¼šå‘Šè¯‰ä½ teardowmåœ¨åç»­å‡†å¤‡å–æ¶ˆäº†ï¼Œå»ºè®®æ”¹ç”¨teardowm_methodï¼Œæ”¹å®Œåå†è·‘ï¼Œå°±ä¸ä¼šå‡ºç°è¿™ç§è­¦å‘Šäº†ã€‚(**setupæ”¹setup_methodä»¥åŠteardowmæ”¹teardowm_methodæ­¤å¤„éœ€è‡ªå·±æ”¹åŠ¨**)

![è¾“å…¥å›¾ç‰‡è¯´æ˜](images/image2_5.png)

 å‰ç½®åç½®æ˜¯ä¸è®¡å…¥ç”¨ä¾‹çš„ï¼Œå®ƒåªä¼šé»˜é»˜çš„å¥”è·‘  ã€‚å¹¶ä¸”å®ƒä¸ä¼šåƒunittestä¸€æ ·æ ¹æ®ç”¨ä¾‹çš„åç§°æ¥è‡ªåŠ¨åˆ¤æ–­æ‰§è¡Œç”¨ä¾‹çš„å…ˆåé¡ºåºã€‚å®ƒæœ‰è‡ªå·±çš„æ–¹å¼æ–¹æ³•ã€‚
> ğŸ’¥æ³¨æ„çœ‹ä¼˜å…ˆçº§ï¼Œä»¥åŠä»£ç ä¸­çš„æ³¨é‡Šï¼Œsetup_classå…ˆè¿è¡Œï¼Œå¹¶ä¸”ç›´åˆ°ä»£ç å…¨éƒ¨è·‘å®Œï¼Œteardown_classæ‰è¿è¡Œï¼Œå…¶ä¸­setup_methodä»¥åŠteardowm_methodæ¯ä¸ªç”¨ä¾‹è¿è¡Œçš„æ—¶å€™å‰åéƒ½ä¼šè¿è¡Œä¸€æ¬¡ã€‚

# ç”¨ä¾‹å…ˆåé¡ºåºè®¾å®špytest-ordering
è¿™å°±éœ€è¦ç”¨åˆ°ç¬¬ä¸‰æ–¹æ’ä»¶äº†
```python
pip install pytest-ordering
```
```python
import pytest

class Testcase():
    def setup_method(self):
        """æ¯ä¸ªæ–¹æ³•ç”¨ä¾‹è¿è¡Œå‰è¿è¡Œ"""
        print("---1-set---")

    def teardown_method(self):
        """æ¯ä¸ªæ–¹æ³•ç”¨ä¾‹è¿è¡Œåè¿è¡Œ"""
        print("---1-down---")

    def setup_class(self):
        """æ¯ä¸ª class è¿è¡Œå‰è¿è¡Œ(åªè¿è¡Œä¸€æ¬¡)"""
        print("---2-set class---")

    def teardown_class(self):
        """æ¯ä¸ª class è¿è¡Œåè¿è¡Œ(åªè¿è¡Œä¸€æ¬¡)"""
        print("---2-down class---")

    def setup_module(self):
        """æ¨¡å—è¿è¡Œå‰è¿è¡Œ(åªè¿è¡Œä¸€æ¬¡)"""
        print("---3-module class---")

    def teardown_module(self):
        """æ¨¡å—è¿è¡Œåè¿è¡Œ(åªè¿è¡Œä¸€æ¬¡)"""
        print("---3-module class---")
        
    @pytest.mark.run(order=2)
    def test_02(self):
        print("--02--")

    @pytest.mark.run(order=1)
    def test_01(self):
        print("--01--")
```
![è¾“å…¥å›¾ç‰‡è¯´æ˜](images/image2_6.png)

å¦‚ä¸Šç®€å•çš„å°æµ‹è¯•ï¼Œä»¥ä¾¿äºäº†è§£ã€‚æ¥ä¸‹æ¥è¯¦ç»†è¯´è¯´ï¼
## æºç å°ç‰‡æ®µ
```python
orders_map = {
    'first': 0,
    'second': 1,
    'third': 2,
    'fourth': 3,
    'fifth': 4,
    'sixth': 5,
    'seventh': 6,
    'eighth': 7,
    'last': -1,
    'second_to_last': -2,
    'third_to_last': -3,
    'fourth_to_last': -4,
    'fifth_to_last': -5,
    'sixth_to_last': -6,
    'seventh_to_last': -7,
    'eighth_to_last': -8,
}
```
> ä¸Šè¿°æ˜¯æºç ä¸­å¯¹äºä¼˜å…ˆçº§

## ä¸€ä¸ªå°ç¤ºèŒƒ
```python
import pytest

class Testnew:

    @pytest.mark.second
    def testa_02(self):
        print("--02--")

    @pytest.mark.third
    def testa_03(self):
        print("--03--")

    @pytest.mark.fourth
    def testa_04(self):
        print("--04--")

    @pytest.mark.first
    def testa_01(self):
        print("--01--")
```
![è¾“å…¥å›¾ç‰‡è¯´æ˜](images/image2_7.png)

> é‰´äºä¸Šè¿°ï¼Œè¿è¡Œçš„æ—¶å€™ä¼šæç¤ºä¸€ç³»åˆ—çš„ä¿¡æ¯(æ­¤å¤„ä¸å±•ç¤º)ï¼Œçœ‹ç€ä¸çˆ½ï¼Œå¯ä»¥ï¼š

```python
import pytest


class Testnew:

    @pytest.mark.run(order=2)
    def testa_02(self):
        print("--02--")

    @pytest.mark.run(order=3)
    def testa_03(self):
        print("--03--")

    @pytest.mark.run(order=4)
    def testa_04(self):
        print("--04--")

    @pytest.mark.run(order=1)
    def testa_01(self):
        print("--01--")
```
![è¾“å…¥å›¾ç‰‡è¯´æ˜](images/image2_8.png)

å½“ç„¶ä¸Šè¿°ä»£ç ä¸­ä½ ä¹Ÿå¯ä»¥å†™å…¥è´Ÿæ•°ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚
# æ‰§è¡Œç‰¹å®šçš„ç”¨ä¾‹
ä¹Ÿå°±æ˜¯å‰é¢è®²è¿‡çš„-kå‚æ•°ã€‚ä¸€èµ·çœ‹çœ‹
```python
import pytest

class Test_new:
    def test_b2(self):
        print("**b2**")

    def test_b1(self):
        print("**b1**")

    def test_a1(self):
        print("--a1--")

    def test_a2(self):
        print("--a2--")
```
![è¾“å…¥å›¾ç‰‡è¯´æ˜](images/image2_9.png)

å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿‡æ»¤æ‰ä¸€äº›ä¸æƒ³è¿è¡Œçš„ç”¨ä¾‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆä¸é”™ä¸”æ¯”è¾ƒå¸¸ç”¨çš„å‚æ•°ã€‚
